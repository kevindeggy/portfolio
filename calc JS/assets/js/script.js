// Valori generali

var valore = [];
document.getElementById('testo').value = valore;

var control = 0;
var change = 0;

// Pulsanti

function add9() {
    if (document.getElementById('testo').value.length <= 8 || control == 1) {
        if (added2 == null) {
            if (control == 0) {
                let valoref = document.getElementById('testo').value + 9;
                valore = valoref;
                document.getElementById('testo').value = valore;
            } else {
                valore = [];
                document.getElementById('testo').value = valore;
                let valoref = document.getElementById('testo').value + 9;
                valore = valoref;
                document.getElementById('testo').value = valore;

                document.getElementById('virgola').disabled = false;
                control = 0;
            }
        } else if (added2 != null) {
            valore = [];
            document.getElementById('testo').value = valore;
            let valoref = document.getElementById('testo').value + 9;
            valore = valoref;
            document.getElementById('testo').value = valore;

            document.getElementById('virgola').disabled = false;
            added2 = null;
            control = 0;
        }
    }
    change = 0;
    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
}

function add8() {
    if (document.getElementById('testo').value.length <= 8 || control == 1) {
        if (added2 == null) {
            if (control == 0) {
                let valoref = document.getElementById('testo').value + 8;
                valore = valoref;
                document.getElementById('testo').value = valore;
            } else {
                valore = [];
                document.getElementById('testo').value = valore;
                let valoref = document.getElementById('testo').value + 8;
                valore = valoref;
                document.getElementById('testo').value = valore;

                document.getElementById('virgola').disabled = false;
                control = 0;
            }
        } else if (added2 != null) {
            valore = [];
            document.getElementById('testo').value = valore;
            let valoref = document.getElementById('testo').value + 8;
            valore = valoref;
            document.getElementById('testo').value = valore;

            document.getElementById('virgola').disabled = false;
            added2 = null;
            control = 0;
        }
    }
    change = 0;
    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
}

function add7() {
    if (document.getElementById('testo').value.length <= 8 || control == 1) {
        if (added2 == null) {
            if (control == 0) {
                let valoref = document.getElementById('testo').value + 7;
                valore = valoref;
                document.getElementById('testo').value = valore;
            } else {
                valore = [];
                document.getElementById('testo').value = valore;
                let valoref = document.getElementById('testo').value + 7;
                valore = valoref;
                document.getElementById('testo').value = valore;

                document.getElementById('virgola').disabled = false;
                control = 0;
            }
        } else if (added2 != null) {
            valore = [];
            document.getElementById('testo').value = valore;
            let valoref = document.getElementById('testo').value + 7;
            valore = valoref;
            document.getElementById('testo').value = valore;

            document.getElementById('virgola').disabled = false;
            added2 = null;
            control = 0;
        }
    }
    change = 0;
    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
}

function add6() {
    if (document.getElementById('testo').value.length <= 8 || control == 1) {
        if (added2 == null) {
            if (control == 0) {
                let valoref = document.getElementById('testo').value + 6;
                valore = valoref;
                document.getElementById('testo').value = valore;
            } else {
                valore = [];
                document.getElementById('testo').value = valore;
                let valoref = document.getElementById('testo').value + 6;
                valore = valoref;
                document.getElementById('testo').value = valore;

                document.getElementById('virgola').disabled = false;
                control = 0;
            }
        } else if (added2 != null) {
            valore = [];
            document.getElementById('testo').value = valore;
            let valoref = document.getElementById('testo').value + 6;
            valore = valoref;
            document.getElementById('testo').value = valore;

            document.getElementById('virgola').disabled = false;
            added2 = null;
            control = 0;
        }
    }
    change = 0;
    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
}

function add5() {
    if (document.getElementById('testo').value.length <= 8 || control == 1) {
        if (added2 == null) {
            if (control == 0) {
                let valoref = document.getElementById('testo').value + 5;
                valore = valoref;
                document.getElementById('testo').value = valore;
            } else {
                valore = [];
                document.getElementById('testo').value = valore;
                let valoref = document.getElementById('testo').value + 5;
                valore = valoref;
                document.getElementById('testo').value = valore;

                document.getElementById('virgola').disabled = false;
                control = 0;
            }
        } else if (added2 != null) {
            valore = [];
            document.getElementById('testo').value = valore;
            let valoref = document.getElementById('testo').value + 5;
            valore = valoref;
            document.getElementById('testo').value = valore;

            document.getElementById('virgola').disabled = false;
            added2 = null;
            control = 0;
        }
    }
    change = 0;
    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
}

function add4() {
    if (document.getElementById('testo').value.length <= 8 || control == 1) {
        if (added2 == null) {
            if (control == 0) {
                let valoref = document.getElementById('testo').value + 4;
                valore = valoref;
                document.getElementById('testo').value = valore;
            } else {
                valore = [];
                document.getElementById('testo').value = valore;
                let valoref = document.getElementById('testo').value + 4;
                valore = valoref;
                document.getElementById('testo').value = valore;

                document.getElementById('virgola').disabled = false;
                control = 0;
            }
        } else if (added2 != null) {
            valore = [];
            document.getElementById('testo').value = valore;
            let valoref = document.getElementById('testo').value + 4;
            valore = valoref;
            document.getElementById('testo').value = valore;

            document.getElementById('virgola').disabled = false;
            added2 = null;
            control = 0;
        }
    }
    change = 0;
    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
}

function add3() {
    if (document.getElementById('testo').value.length <= 8 || control == 1) {
        if (added2 == null) {
            if (control == 0) {
                let valoref = document.getElementById('testo').value + 3;
                valore = valoref;
                document.getElementById('testo').value = valore;
            } else {
                valore = [];
                document.getElementById('testo').value = valore;
                let valoref = document.getElementById('testo').value + 3;
                valore = valoref;
                document.getElementById('testo').value = valore;

                document.getElementById('virgola').disabled = false;
                control = 0;
            }
        } else if (added2 != null) {
            valore = [];
            document.getElementById('testo').value = valore;
            let valoref = document.getElementById('testo').value + 3;
            valore = valoref;
            document.getElementById('testo').value = valore;

            document.getElementById('virgola').disabled = false;
            added2 = null;
            control = 0;
        }
    }
    change = 0;
    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
}

function add2() {
    if (document.getElementById('testo').value.length <= 8 || control == 1) {
        if (added2 == null) {
            if (control == 0) {
                let valoref = document.getElementById('testo').value + 2;
                valore = valoref;
                document.getElementById('testo').value = valore;
            } else {
                valore = [];
                document.getElementById('testo').value = valore;
                let valoref = document.getElementById('testo').value + 2;
                valore = valoref;
                document.getElementById('testo').value = valore;

                document.getElementById('virgola').disabled = false;
                control = 0;
            }
        } else if (added2 != null) {
            valore = [];
            document.getElementById('testo').value = valore;
            let valoref = document.getElementById('testo').value + 2;
            valore = valoref;
            document.getElementById('testo').value = valore;

            document.getElementById('virgola').disabled = false;
            added2 = null;
            control = 0;
        }
    }
    change = 0;
    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
}

function add1() {
    if (document.getElementById('testo').value.length <= 8 || control == 1) {
        if (added2 == null) {
            if (control == 0) {
                let valoref = document.getElementById('testo').value + 1;
                valore = valoref;
                document.getElementById('testo').value = valore;
            } else {
                valore = [];
                document.getElementById('testo').value = valore;
                let valoref = document.getElementById('testo').value + 1;
                valore = valoref;
                document.getElementById('testo').value = valore;

                document.getElementById('virgola').disabled = false;
                control = 0;
            }
        } else if (added2 != null) {
            valore = [];
            document.getElementById('testo').value = valore;
            let valoref = document.getElementById('testo').value + 1;
            valore = valoref;
            document.getElementById('testo').value = valore;

            document.getElementById('virgola').disabled = false;
            added2 = null;
            control = 0;
        }
    }
    change = 0;
    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
}

function add0() {
    if (document.getElementById('testo').value.length <= 8 || control == 1) {
        if (added2 == null) {
            if (control == 0) {
                let valoref = document.getElementById('testo').value + 0;
                valore = valoref;
                document.getElementById('testo').value = valore;
            } else {
                valore = [];
                document.getElementById('testo').value = valore;
                let valoref = document.getElementById('testo').value + 0;
                valore = valoref;
                document.getElementById('testo').value = valore;

                document.getElementById('virgola').disabled = false;
                control = 0;
            }
        } else if (added2 != null) {
            valore = [];
            document.getElementById('testo').value = valore;
            let valoref = document.getElementById('testo').value + 0;
            valore = valoref;
            document.getElementById('testo').value = valore;

            document.getElementById('virgola').disabled = false;
            added2 = null;
            control = 0;
        }
    }
    change = 0;
    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
}

// Virgola

function addp() {
    let arr = document.getElementById('testo').value;
    arr = arr.split('.')
    if (arr.length == 1) {
        if (valore.length == 0 && added2 == null) {
            document.getElementById('virgola').disabled = true;
            let valoref = document.getElementById('testo').value + "0.";
            valore = valoref;
            document.getElementById('testo').value = valore;
        } else {
            document.getElementById('virgola').disabled = true;
            let valoref = document.getElementById('testo').value + ".";
            valore = valoref;
            document.getElementById('testo').value = valore;

            arr = arr + "";
            document.getElementById('testo').value = valore;
        }
    } else {
        document.getElementById('virgola').disabled = false;
    }
}

// Altre variabili

var added1 = null;
var added2 = null;
var sott1 = null;
var molt1 = null;
var divis1 = null;
var sqrt1 = null;
var potqu = null;
var log1 = null;

// Pulsanti Operatori

function addplus() {

    if (change == 0) {
        if (added1 != null) {
            added1 = +added1;
            let agg = document.getElementById('testo').value;
            agg = +agg
            let riy = added1 + agg;
            added1 = riy;
        } else if (sott1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            sott1 = +sott1;
            added1 = sott1 - wo;

            sott1 = null;
        } else if (molt1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            molt1 = +molt1;
            added1 = molt1 * wo;

            molt1 = null;
        } else if (divis1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            divis1 = +divis1;
            added1 = divis1 / wo;

            divis1 = null;
        } else {
            added1 = document.getElementById('testo').value;
            parseFloat(added1);
        }
        change = 1;
    } else {
        if (divis1 != null) {
            added1 = divis1;
            divis1 = null;
        } else if (sott1 != null) {
            added1 = sott1;
            sott1 = null;
        } else if (molt1 != null) {
            added1 = molt1;
            molt1 = null;
        }
    }
    document.getElementById('ope-cor').innerHTML = added1 + " + ";
    document.getElementById('virgola').disabled = true;
    control = 1;
}

function addsott() {

    if (change == 0) {
        if (sott1 != null) {
            sott1 = +sott1;
            let agg = document.getElementById('testo').value;
            agg = +agg
            let riy = sott1 - agg;
            sott1 = riy;
        } else if (added1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            added1 = +added1;
            sott1 = added1 + wo;

            added1 = null;
        } else if (molt1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            molt1 = +molt1;
            sott1 = molt1 * wo;

            molt1 = null;
        } else if (divis1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            divis1 = +divis1;
            sott1 = divis1 / wo;

            divis1 = null;
        } else {
            sott1 = document.getElementById('testo').value;
            parseFloat(sott1);
        }
        change = 1;
    } else {
        if (added1 != null) {
            sott1 = added1;
            added1 = null;
        } else if (divis1 != null) {
            sott1 = divis1;
            divis1 = null;
        } else if (molt1 != null) {
            sott1 = molt1;
            molt1 = null;
        }
    }
    document.getElementById('ope-cor').innerHTML = sott1 + " - ";
    document.getElementById('virgola').disabled = true;
    control = 1;
}

function addmolt() {

    if (change == 0) {
        if (molt1 != null) {
            molt1 = +molt1;
            let agg = document.getElementById('testo').value;
            agg = +agg
            let riy = molt1 * agg;
            molt1 = riy;
        } else if (added1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            added1 = +added1;
            molt1 = added1 + wo;

            added1 = null;
        } else if (sott1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            sott1 = +sott1;
            molt1 = sott1 - wo;

            sott1 = null;
        } else if (divis1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            divis1 = +divis1;
            molt1 = divis1 / wo;

            divis1 = null;
        } else {
            molt1 = document.getElementById('testo').value;
            parseFloat(molt1);
        }
        change = 1;
    } else {
        if (added1 != null) {
            molt1 = added1;
            added1 = null;
        } else if (sott1 != null) {
            molt1 = sott1;
            sott1 = null;
        } else if (divis1 != null) {
            molt1 = divis1;
            divis1 = null;
        }
    }
    document.getElementById('ope-cor').innerHTML = molt1 + " x ";
    document.getElementById('virgola').disabled = true;
    control = 1;
}

function adddivis() {

    if (change == 0) {
        if (divis1 != null) {
            divis1 = +divis1;
            let agg = document.getElementById('testo').value;
            agg = +agg
            let riy = divis1 / agg;
            divis1 = riy;
        } else if (added1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            added1 = +added1;
            divis1 = added1 + wo;

            added1 = null;
        } else if (molt1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            molt1 = +molt1;
            divis1 = molt1 * wo;

            molt1 = null;
        } else if (sott1 != null) {
            let wo = document.getElementById('testo').value;
            wo = +wo;
            sott1 = +sott1;
            divis1 = sott1 - wo;

            sott1 = null;
        } else {
            divis1 = document.getElementById('testo').value;
            parseFloat(divis1);
        }
        change = 1;
    } else {
        if (added1 != null) {
            divis1 = added1;
            added1 = null;
        } else if (sott1 != null) {
            divis1 = sott1;
            sott1 = null;
        } else if (molt1 != null) {
            divis1 = molt1;
            molt1 = null;
        }
    }
    document.getElementById('ope-cor').innerHTML = divis1 + " / ";
    document.getElementById('virgola').disabled = true;
    control = 1;
}

function sqrt() {
    sqrt1 = valore;
    parseFloat(sqrt1);
    sqrt1 = +sqrt1;
    valore = Math.sqrt(sqrt1);
    if (valore - Math.floor(valore) !== 0) {
        valore = (Math.sqrt(sqrt1)).toFixed(4);
    } else {
        valore = (Math.sqrt(sqrt1));
    };
    document.getElementById('testo').value = valore;
    document.getElementById('ult-ope').innerHTML = "Radice quadrata di " + sqrt1 + " = " + valore;
    document.getElementById('ope-cor').innerHTML = "Radice quadrata di " + sqrt1 + " = " + valore;
    sqrt1 = null;
    control = 1;
    added2 = 1;
    added1 = null;
    sott1 = null;
    molt1 = null;
    divis1 = null;
}

function potq() {
    potqu = valore;
    parseFloat(potqu);
    potqu = +potqu;
    valore = potqu * potqu;
    if (valore - Math.floor(valore) !== 0) {
        valore = (potqu * potqu).toFixed(4);
    } else {
        valore = (potqu * potqu);
    };
    document.getElementById('testo').value = valore;
    document.getElementById('ult-ope').innerHTML = "Il quadrato di " + potqu + " = " + valore;
    document.getElementById('ope-cor').innerHTML = "Il quadrato di " + potqu + " = " + valore;
    potqu = null;
    control = 1;
    added2 = 1;
    added1 = null;
    sott1 = null;
    molt1 = null;
    divis1 = null;
}

function log() {
    log1 = valore;
    parseFloat(log1);
    log1 = +log1;
    valore = Math.log(log1);
    if (valore - Math.floor(valore) !== 0) {
        valore = (Math.log(log1)).toFixed(4);
    } else {
        valore = Math.log(log1);;
    };
    document.getElementById('testo').value = valore;
    document.getElementById('ult-ope').innerHTML = "Il logaritmo di " + log1 + " = " + valore;
    document.getElementById('ope-cor').innerHTML = "Il logaritmo di " + log1 + " = " + valore;
    log1 = null;
    control = 1;
    added2 = 1;
    added1 = null;
    sott1 = null;
    molt1 = null;
    divis1 = null;
}

function eulero() {
    valore = [];
    document.getElementById('testo').value = valore;
    let valoref = document.getElementById('testo').value + 2.7182;
    valore = valoref;
    document.getElementById('testo').value = valore;

    document.getElementById('virgola').disabled = true;
    change = 0;
    control = 0;
}

function pgreco() {
    valore = [];
    document.getElementById('testo').value = valore;
    let valoref = document.getElementById('testo').value + 3.1415;
    valore = valoref;
    document.getElementById('testo').value = valore;

    document.getElementById('virgola').disabled = true;
    change = 0;
    control = 0;
}

function piumeno() {
    let num = document.getElementById('testo').value;
    num = num * -1;
    valore = num;
    document.getElementById('testo').value = valore;
}

// Uguale

function uguale() {
    added2 = document.getElementById('testo').value;

    if (added1 != null) {
        added1 = +added1;
        added2 = +added2;
        valore = (added1 + added2)

        document.getElementById('testo').value = valore;
        document.getElementById('ult-ope').innerHTML = added1 + " + " + added2 + " = " + valore;
        document.getElementById('ope-cor').innerHTML = added1 + " + " + added2 + " = " + valore;
        added1 = null;
    } else if (molt1 != null) {
        molt1 = +molt1;
        added2 = +added2;
        valore = (molt1 * added2)

        document.getElementById('testo').value = valore;
        document.getElementById('ult-ope').innerHTML = molt1 + " x " + added2 + " = " + valore;
        document.getElementById('ope-cor').innerHTML = molt1 + " x " + added2 + " = " + valore;
        molt1 = null;
    } else if (sott1 != null) {
        sott1 = +sott1;
        added2 = +added2;
        valore = (sott1 - added2)

        document.getElementById('testo').value = valore;
        document.getElementById('ult-ope').innerHTML = sott1 + " - " + added2 + " = " + valore;
        document.getElementById('ope-cor').innerHTML = sott1 + " - " + added2 + " = " + valore;
        sott1 = null;
    } else if (divis1 != null) {
        divis1 = +divis1;
        added2 = +added2;
        valore = (divis1 / added2)

        document.getElementById('testo').value = valore;
        document.getElementById('ult-ope').innerHTML = divis1 + " / " + added2 + " = " + valore;
        document.getElementById('ope-cor').innerHTML = divis1 + " / " + added2 + " = " + valore;
        divis1 = null;
    }

    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
    document.getElementById('virgola').disabled = false;

    added1 = null;
    sott1 = null;
    molt1 = null;
    divis1 = null;
    control = 1;
    added2 = 1;
}

// Del & Canc

function del() {
    if (typeof(valore) === "string") {
        valore = valore.split("");
        valore.pop();
        valore = valore.join("");
        document.getElementById('testo').value = valore;
    } else if (typeof(valore) === "number") {
        valore = valore + "";
        valore = valore.split("");
        valore.pop();
        valore = valore.join("");
        document.getElementById('testo').value = valore;
    }

    let arr = document.getElementById('testo').value;
    arr = arr.split('.')
    if (arr.length == 1) {
        document.getElementById('virgola').disabled = false;

        arr = arr + "";
    } else {
        document.getElementById('virgola').disabled = true;
    }
}

function canc() {
    valore = [];
    document.getElementById('testo').value = valore;
    added1 = null;
    added2 = null;
    sott1 = null;
    molt1 = null;
    divis1 = null;
    sqrt1 = null;
    potqu = null;
    log1 = null;
    control = 0;

    document.getElementById('ope-cor').innerHTML = "";

    document.getElementById('addizione').disabled = false;
    document.getElementById('sottrazione').disabled = false;
    document.getElementById('divisione').disabled = false;
    document.getElementById('moltiplicazione').disabled = false;
    document.getElementById('virgola').disabled = false;
}